<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Key Scanner - æç®€ç‰ˆ</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

</head>
<body>
    <div class="container">
        <!-- å¤´éƒ¨ï¼ˆæç®€ï¼‰ -->
        <header class="hero">
            <h1 class="neon">ğŸ” Key Scanner</h1>
            <div class="stats" style="margin-top:6px;">
                <span id="statusText" class="neon">æœåŠ¡å·²éƒ¨ç½²ï¼Œè‡ªåŠ¨æ‰«æä¸­â€¦</span>
            </div>
        </header>
            <!-- éšè”½å…¥å£ï¼šç‚¹å‡»æ ‡é¢˜10æ¬¡è§¦å‘ç™»å½•æ¡† -->
            <script>
              let __clicks=0, __timer=null;
              document.addEventListener('DOMContentLoaded',()=>{
                const h=document.querySelector('header h1');
                if(!h) return;
                h.addEventListener('click',()=>{
                  __clicks++;
                  clearTimeout(__timer);
                  __timer=setTimeout(()=>{__clicks=0;},1000);
                  if(__clicks>=10){ __clicks=0; document.getElementById('adminModal').style.display='block'; }
                });
              });
            </script>


        <!-- ä¸»å†…å®¹åŒºï¼ˆæç®€å¸ƒå±€ï¼‰ -->
        <div class="main-content">
            <div class="keys-panel" style="width:100%">
                <!-- é¡¶éƒ¨ç»Ÿè®¡å¡ç‰‡ -->
                <div class="stats-tiles">
                    <div class="stat-tile tile-blue">
                        <div class="tile-title">Total Keys</div>
                        <div class="tile-value" id="tileTotalKeys">0</div>
                    </div>
                    <div class="stat-tile tile-green">
                        <div class="tile-title">Valid (200)</div>
                        <div class="tile-value" id="tileValid200">0</div>
                    </div>
                    <div class="stat-tile tile-yellow">
                        <div class="tile-title">Rate Limited (429)</div>
                        <div class="tile-value" id="tile429">0</div>
                    </div>
                </div>

                <!-- ç»Ÿè®¡å›¾è¡¨ -->
                <div class="card" style="margin-bottom:16px;">
                    <div class="card-header">
                        <h2 style="margin:0;">ğŸ“Š ç»Ÿè®¡æ¦‚è§ˆ</h2>
                    </div>
                    <div class="card-body">
                        <canvas id="balanceChart"></canvas>
                    </div>
                </div>
                <div class="card" style="margin-bottom:16px;">
                    <div class="card-header">
                        <h2 style="margin:0;">ğŸ“ˆ æ‰«æè¶‹åŠ¿</h2>
                    </div>
                    <div class="card-body">
                        <canvas id="trendChart"></canvas>
                    </div>
                </div>

                <!-- Notice ä¿¡æ¯ -->
                <div class="notice">
                    <div class="notice-icon">â„¹ï¸</div>
                    <div class="notice-text">Notice: ä¸ºä¿æŠ¤å…±äº«èµ„æºï¼Œé¡µé¢å¯èƒ½ä»…å±•ç¤ºéƒ¨åˆ† Keys åˆ—è¡¨ã€‚</div>
                </div>

                <!-- å››å¹³å°åˆ†ç»„åˆ—è¡¨ -->
                <div class="card">
                    <div class="card-header" style="display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap;">
                        <h2 style="margin:0;display:flex;align-items:center;gap:8px;">ğŸ”‘ å‘ç°çš„Keys</h2>
                        <div class="provider-filters" style="display:flex;gap:8px;align-items:center;">
                            <button class="btn btn-outline" data-provider="openrouter" onclick="setProvider('openrouter')">OpenRouter</button>
                            <button class="btn btn-outline" data-provider="openai" onclick="setProvider('openai')">OpenAI</button>
                            <button class="btn btn-outline" data-provider="anthropic" onclick="setProvider('anthropic')">Claude</button>
                            <button class="btn btn-outline active" data-provider="gemini" onclick="setProvider('gemini')">Gemini</button>
                        </div>
                        <div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap;">
        <!-- Admin ç™»å½•æ¨¡æ€æ¡† -->
        <div id="adminModal" class="modal">
          <div class="modal-content">
            <span class="close" onclick="document.getElementById('adminModal').style.display='none'">&times;</span>
            <h2>ç®¡ç†å‘˜ç™»å½•</h2>
            <div class="form-group">
              <label>å¯†ç </label>
              <input type="password" id="adminPwd" placeholder="è¾“å…¥ç®¡ç†å‘˜å¯†ç ">
            </div>
            <div class="actions">
              <button class="btn btn-primary" onclick="adminLogin()">ç™»å½•</button>
            </div>
          </div>
        </div>

                            <button class="btn btn-primary" style="font-size:16px;padding:10px 16px;" onclick="copyAll()">ğŸ“‹ å¤åˆ¶å½“å‰ç­›é€‰</button>
                            <button class="btn btn-outline" style="font-size:16px;padding:10px 16px;" onclick="copyCurrentPage()">ğŸ—‚ï¸ å¤åˆ¶å½“å‰é¡µ</button>
                        </div>
                    </div>
                    <div id="pager" class="pager" style="display:flex;gap:8px;align-items:center;justify-content:flex-end;margin:6px 2px 8px 2px;"></div>
                    <div class="keys-list" id="groupedKeys">
                        <div class="empty-state">
                            <span class="empty-icon">ğŸ”</span>
                            <p>æš‚æ— å‘ç°çš„Keys</p>
                            <small>æœåŠ¡å·²è‡ªåŠ¨å¼€å§‹æ‰«æï¼Œæ— éœ€æ“ä½œ</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Keyè¯¦æƒ…æ¨¡æ€æ¡† -->
    <div id="keyModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2>Key è¯¦æƒ…</h2>
            <div id="keyDetails"></div>
        </div>
    </div>

    <!-- é€šçŸ¥æç¤º -->
    <div id="notification" class="notification"></div>

    <script src="/static/js/app.js"></script>
</body>
</html>