<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Key Scanner - 极简版</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

</head>
<body>
    <div class="container">
        <!-- 头部（极简） -->
        <header class="hero">
            <h1 class="neon">🔍 Key Scanner</h1>
            <div class="stats" style="margin-top:6px;">
                <span id="statusText" class="neon">服务已部署，自动扫描中…</span>
            </div>
        </header>
            <!-- 隐蔽入口：点击标题10次触发登录框 -->
            <script>
              let __clicks=0, __timer=null;
              document.addEventListener('DOMContentLoaded',()=>{
                const h=document.querySelector('header h1');
                if(!h) return;
                h.addEventListener('click',()=>{
                  __clicks++;
                  clearTimeout(__timer);
                  __timer=setTimeout(()=>{__clicks=0;},1000);
                  if(__clicks>=10){ __clicks=0; document.getElementById('adminModal').style.display='block'; }
                });
              });
            </script>


        <!-- 主内容区（极简布局） -->
        <div class="main-content">
            <div class="keys-panel" style="width:100%">
                <!-- 顶部统计卡片 -->
                <div class="stats-tiles">
                    <div class="stat-tile tile-blue">
                        <div class="tile-title">Total Keys</div>
                        <div class="tile-value" id="tileTotalKeys">0</div>
                    </div>
                    <div class="stat-tile tile-green">
                        <div class="tile-title">Valid (200)</div>
                        <div class="tile-value" id="tileValid200">0</div>
                    </div>
                    <div class="stat-tile tile-yellow">
                        <div class="tile-title">Rate Limited (429)</div>
                        <div class="tile-value" id="tile429">0</div>
                    </div>
                </div>

                <!-- 统计图表 -->
                <div class="card" style="margin-bottom:16px;">
                    <div class="card-header">
                        <h2 style="margin:0;">📊 统计概览</h2>
                    </div>
                    <div class="card-body">
                        <canvas id="balanceChart"></canvas>
                    </div>
                </div>
                <div class="card" style="margin-bottom:16px;">
                    <div class="card-header">
                        <h2 style="margin:0;">📈 扫描趋势</h2>
                    </div>
                    <div class="card-body">
                        <canvas id="trendChart"></canvas>
                    </div>
                </div>

                <!-- Notice 信息 -->
                <div class="notice">
                    <div class="notice-icon">ℹ️</div>
                    <div class="notice-text">Notice: 为保护共享资源，页面可能仅展示部分 Keys 列表。</div>
                </div>

                <!-- 四平台分组列表 -->
                <div class="card">
                    <div class="card-header" style="display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap;">
                        <h2 style="margin:0;display:flex;align-items:center;gap:8px;">🔑 发现的Keys</h2>
                        <div class="provider-filters" style="display:flex;gap:8px;align-items:center;">
                            <button class="btn btn-outline" data-provider="openrouter" onclick="setProvider('openrouter')">OpenRouter</button>
                            <button class="btn btn-outline" data-provider="openai" onclick="setProvider('openai')">OpenAI</button>
                            <button class="btn btn-outline" data-provider="anthropic" onclick="setProvider('anthropic')">Claude</button>
                            <button class="btn btn-outline active" data-provider="gemini" onclick="setProvider('gemini')">Gemini</button>
                        </div>
                        <div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap;">
        <!-- Admin 登录模态框 -->
        <div id="adminModal" class="modal">
          <div class="modal-content">
            <span class="close" onclick="document.getElementById('adminModal').style.display='none'">&times;</span>
            <h2>管理员登录</h2>
            <div class="form-group">
              <label>密码</label>
              <input type="password" id="adminPwd" placeholder="输入管理员密码">
            </div>
            <div class="actions">
              <button class="btn btn-primary" onclick="adminLogin()">登录</button>
            </div>
          </div>
        </div>

                            <button class="btn btn-primary" style="font-size:16px;padding:10px 16px;" onclick="copyAll()">📋 复制当前筛选</button>
                            <button class="btn btn-outline" style="font-size:16px;padding:10px 16px;" onclick="copyCurrentPage()">🗂️ 复制当前页</button>
                        </div>
                    </div>
                    <div id="pager" class="pager" style="display:flex;gap:8px;align-items:center;justify-content:flex-end;margin:6px 2px 8px 2px;"></div>
                    <div class="keys-list" id="groupedKeys">
                        <div class="empty-state">
                            <span class="empty-icon">🔍</span>
                            <p>暂无发现的Keys</p>
                            <small>服务已自动开始扫描，无需操作</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Key详情模态框 -->
    <div id="keyModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2>Key 详情</h2>
            <div id="keyDetails"></div>
        </div>
    </div>

    <!-- 通知提示 -->
    <div id="notification" class="notification"></div>

    <script src="/static/js/app.js"></script>
</body>
</html>